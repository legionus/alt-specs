# Original package name LuaSec
%define oname luasec
%define oversion 0.6-1
%define rockspec %oname-%oversion.rockspec
Name: lua-module-%oname
Version: 0.6
Release: alt2.1
Summary: A binding for OpenSSL library to provide TLS/SSL communication over LuaSocket.
License: MIT
Group: Development/Other
Url: https://github.com/brunoos/luasec/wiki
Provides: luarocks(%oname) = %version

# git://github.com/brunoos/luasec.git
Source: luasec-0.6.tar

Requires: luarocks(luasocket) 

BuildPreReq: rpm-macros-lua >= 1.2
BuildRequires: luarocks(luasocket) 
# Automatically added by buildreq on ...
BuildRequires: liblua5-devel luarocks libssl-devel

%description
This version delegates to LuaSocket the TCP connection establishment between the client and server. Then LuaSec uses this connection to start a secure TLS/SSL session.

%prep
%setup -n %oname-%version

%install
%luarocks_make %rockspec
%luarocks_move_docs samples

%files
%lua_modulesdir/*
%lua_modulesdir_noarch/*
%luarocks_dbdir/%oname
%doc CHANGELOG LICENSE* README* docs_from_rockstree/*
%exclude %luarocks_dbdir/manifest

%changelog
* Wed Aug 29 2018 Grigory Ustinov <grenka@altlinux.org> 0.6-alt2.1
- NMU: Rebuild with new openssl 1.1.0.

* Thu Jul 13 2017 Aleksei Nikiforov <darktemplar@altlinux.org> 0.6-alt2
- Rebuild with new luarocks and lua-5.3

* Tue Nov 01 2016 Ildar Mulyukov <ildar@altlinux.ru> 0.6-alt1_lr1
- autogenerated by lrimport

