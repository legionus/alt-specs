Name: procbench
Version: 0.9.0a
Release: alt3.1

Summary: CPU benchmark and information tool
License: GPLv2+
Group: System/Kernel and hardware

Url: http://procbench.sourceforge.net/
Source: http://download.sourceforge.net/procbench/procbench_%version.tar.gz
Patch0: procbench-0.9.0-stdio.patch
Patch1: procbench-0.9.0a-alt-glibc-2.16.patch

BuildRequires: automake_1.10
# Automatically added by buildreq on Fri Jun 12 2009
BuildRequires: gcc-c++

%description
Procbench is an information tool and CPU benchmark that tests memory transfer
and math capabilities of your x86 processor. It includes programs (pb_g++ and
pb_gcc) to get the best GCC optimization parameters for a CPU.

%prep
# weird...
%setup -n procbench_0.9.0aubuntu3~intrepid
%patch0 -p1
%patch1 -p3

%build
# QnD... :\
cp -f /usr/share/automake-1.10/config.sub .
cp -f /usr/share/automake-1.10/config.guess .

%configure
%make_build

%install
%makeinstall_std

%add_findreq_skiplist %_datadir/procbench/*

%files
%_bindir/*
%_datadir/procbench
## Looks like this library will have no use. Don't package it.
# The library needs a minium for the key -r (see #26331).
# Returning it to the package.
%_libdir/libpbbench.so*

%changelog
* Sun Dec 09 2012 Eugeny A. Rostovtsev (REAL) <real at altlinux.org> 0.9.0a-alt3.1
- Fixed build with glibc 2.16

* Mon Jan 23 2012 Aleksey Avdeev <solo@altlinux.ru> 0.9.0a-alt3
- Fix: Library libpbbench.so returned to the package (Closes: #26331).

* Mon Dec 13 2010 Victor Forsiuk <force@altlinux.org> 0.9.0a-alt2
- Avoid autogenerated dependency on gcc and g++ (Closes: #24706).

* Tue Jun 09 2009 Victor Forsyuk <force@altlinux.org> 0.9.0a-alt1
- 0.9.0 alpha.

* Wed Jun 18 2008 Victor Forsyuk <force@altlinux.org> 0.8.2a-alt1
- Initial build.
