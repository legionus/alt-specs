#
#   - Test::HTTP::Server::Simple -
#   This spec file was automatically generated by cpan2rpm [ver: 2.027]
#   (ALT Linux revision)
#   The following arguments were used:
#       Test::HTTP::Server::Simple
#   For more information on cpan2rpm please visit: http://perl.arix.com/
#

%define module Test-HTTP-Server-Simple
%define m_distro Test-HTTP-Server-Simple
%define m_name Test::HTTP::Server::Simple
%define m_author_id JESSE
%define _enable_test 1

Name: perl-Test-HTTP-Server-Simple
Version: 0.11
Release: alt1

Summary: Test::More functions for HTTP::Server::Simple

License: Artistic
Group: Development/Perl
Url: %CPAN %m_distro

Packager: Vitaly Lipatov <lav@altlinux.ru>

BuildArch: noarch
Source: http://www.cpan.org/authors/id/A/AL/ALEXMV/Test-HTTP-Server-Simple-0.11.tar.gz

# Automatically added by buildreq on Wed Feb 27 2008
BuildRequires: perl-HTTP-Server-Simple perl-NEXT perl-devel

%description
This mixin class provides methods to test an HTTP::Server::Simple-based web
server.  Currently, it provides only one such method: "started_ok".

"started_ok" takes
an optional test description.  The server needs to have been configured (specifically,
its port needs to have been set), but it should not have been run or backgrounded.
"started_ok" calls "background" on the server, which forks it to run in the background.
Test::HTTP::Server::Simple takes care of killing the server when your test script dies,
even if you kill your test script with an interrupt.  "started_ok" returns the URL
"http://localhost:$port" which you can use to connect to your server.

Note that if the child process dies, or never gets around to listening for connections, this
just hangs.  (This may be fixed in a future version.)

Also, it probably won't work if you use a custom Net::Server in your server.

%prep
%setup -q -n %m_distro-%version

%build
%perl_vendor_build

%install
%perl_vendor_install
rm -rf %buildroot%perl_vendor_man3dir/

%files
%perl_vendor_privlib/Test/HTTP/*

%changelog
* Tue Jul 13 2010 Igor Vlasenko <viy@altlinux.ru> 0.11-alt1
- automated CPAN update

* Sun Dec 21 2008 Vitaly Lipatov <lav@altlinux.ru> 0.09-alt1
- new version 0.09 (with rpmrb script)
- fix directory ownership violation
- disable man packaging
- change packager

* Sun Apr 13 2008 Andrew Kornilov <hiddenman@altlinux.ru> 0.06-alt1
- Build for Sisyphus (thanks to Igor Zubkov <icesik@altlinux.org>)


